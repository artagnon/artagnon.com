[ag/3] Schemes II

The final ingredient in the definition of an affine scheme is the structure sheaf \(\mathscr{O}_{\text{Spec } A}\), which we will think of as the sheaf of algebraic functions. For example, in \(\mathfrak{A}^2\), we expect that on the open set \(D(xy)\), \((3x^4 + y + 7)/(x^3 y^8)\) is an algebraic function. The function will have values at points, but won't be determined by their values at points; instead, they will be determined by their germs. It suffices to describe the structure sheaf as the sheaf of rings on the base of distinguished open sets.

Define \(\mathscr{O}_{\text{Spec } A}(D(f))\) to be the localization of ring \(A\) at the multiplicative sets of all functions that do not vanish outside of \(V(f)\); i.e. those \(g\) for which \(V(g) \subset V(f)\) or equivalently \(I(f) \subset I(g)\). This depends only on \(D(f)\) and not on \(f\) itself.

If \(D(f') \subset D(f)\), define the restriction map:

\[\text{res}_{D(f), D(f')} : \mathscr{O}_{\text{Spec } A}(D(f)) \rightarrow \mathscr{O}_{\text{Spec } A}(D(f'))\]

in the obvious way; the latter ring is a further restriction of the former ring. The restriction maps obviously commute, and this is a presheaf on a distinguished base.

The data just described give a sheaf on a distinguished open set, and hence determine a sheaf on the topological space on \(\text{Spec } A\). The topological space along with the structure sheaf will be called an `affine scheme`. The notation \(\text{Spec } A\) will henceforth denote the data of the topological space along with the structure sheaf. \(\mathscr{O}_{\text{Spec } A}\) contains data not just of the sheaf, but also the underlying distinguished base that provides a good way of working with \(\mathscr{O}_{\text{Spec } A}\). To prove this, we need to show that base gluability and base identity axioms hold on \(\text{Spec } A\). Suppose \(\text{Spec } A = \bigcup_{i \in I} D({f_i})\), or equivalently, the ideal generated by \(f_i\) is the entire ring \(A\). By quasicompactness of \(A\), \(\text{Spec } A = \bigcup_{i = 1}^{i = n} D({f_i})\) for finite \(n\); i.e. \((f_1, \ldots, f_n) = A\). Suppose we are given \(s \in A\) such that \(\text{res}_{\text{Spec } A, D(f_i)} s = 0\) for all \(A_{f_i}\) for all \(i\); then we wish to show that \(s = 0\). This implies that there is some \(m\) such that for all \(i \in {1, \ldots, n}\) such that \(f_i^m s = 0\). Now, \((f_1^m, \ldots, f_n^m) = A\), so there are \(r_i \in A\) with \(\sum_{i = 1}^n r_i f_i^m = 1\) from which
\[s = \sum_{i = 1}^n r_i (f_i^m s) = 0\]

Hence, we have shown base identity axiom. For the base gluability axiom, we have \(a_i/f_i^{l_i} \in A_f\) agreeing on overlaps \(A_{f_i, f_j}\). Letting \(g_i = f_i^{l_i}\), using \(D(g_i) = D(f_i)\), our elements are of the form \(a_i/g_i \in A_{g_i}\). The fact that \(a_i/g_i\) and \(a_j/g_j\) agree on overlap means that for some \(m_{ij}\),
\[(g_i g_j)^{m_{ij}} (g_j a_i - g_i a_j) = 0\]

Taking \(m = \text{max } m_{ij}\), we get:
\[(g_i g_j)^m (g_j a_i - g_i a_j) = 0\]

for all \(i, j\). Let \(b_i = a_i g_i^m\) for all \(i\), and \(h_i = g_i^{m + 1}\), so \(D(h_i) = D(g_i)\). On each \(D(h_i)\), we have a function \(b_i/h_i\), and the overlap condition is:
\[h_j b_i = h_i b_j\]

Now \(\bigcup D(h_i) = \text{Spec } A\) implying that \(1 = \sum r_i h_i\), for some \(r_i \in A\). Define \(r = \sum r_i b_i\). This will be an element of \(A\) that restricts to each \(b_i/h_j\). Indeed, from the overlap condition,
\[r_j h_j = \sum_i r_i h_i b_j = b_j\]

completing the proof.

Suppose \(M\) is an \(A\)-module. The following construction describes sheaf \(\tilde{M}\) on a distinguished base. Define \(\tilde{M}(D(f))\) to be the localization of \(M\) at a multiplicative set of all functions that do not vanish on \(V(f)\). Define restriction maps \(\text{res}_{D(f), D(g)}\) in an analogous way to \(\mathscr{O}_{\text{Spec } A}\). This defines a sheaf on a distinguished base, and hence on \(\text{Spec } A\). Hence, this is an \(\mathscr{O}_{\text{Spec } A}\)-module.

Note that \(\mathscr{O}_{\text{Spec } A}(U)\) is not a localization of \(A\) at the multiplicative set of functions that do not vanish at any point on \(U\). For instance, let \(\text{Spec } A\) be two copies of \(\mathbb{A}_k^2\) glued together at their origins, and \(U\) be a complement of the origins. Then, the function which is \(1\) on the first copy of \(\mathbb{A}_k^2/\{(0, 0)\}\) is \(0\) on the second copy of \(\mathbb{A}_k^2/\{(0, 0)\}\). Let us collect five counter-examples which we will see in more detail later:

(a) The cone over the quadratic surface, \(\text{Spec } A\) and \(\text{Proj } A\), where \(A = k[w, x, y, z]/(wz - xy)\).
(b) Two planes meeting at a point.
(c) Affine plane minus the origin, \(\mathbb{A}^n - 0\); its inclusion with \(\mathbb{A}^n\); and \(\mathbb{A}^n\) with its doubled origin; each with \(n = 1, 2, \infty\).
(d) Infinite disjoint union of schemes, especially, \(\bigsqcup \text{Spec } k[x]/(x^n)\).
(e) \(\text{Spec } \bar{\mathbb{Q}} \rightarrow \text{Spec } \mathbb{Q}\).