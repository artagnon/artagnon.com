[ag/3] Schemes II

The final ingredient in the definition of an affine scheme is the structure sheaf \(\mathscr{O}_{\text{Spec } A}\), which we will think of as the sheaf of algebraic functions. For example, in \(\mathfrak{A}^2\), we expect that on the open set \(D(xy)\), \((3x^4 + y + 7)/(x^3 y^8)\) is an algebraic function. The function will have values at points, but won't be determined by their values at points; instead, they will be determined by their germs. It suffices to describe the structure sheaf as the sheaf of rings on the base of distinguished open sets.

Define \(\mathscr{O}_{\text{Spec } A}(D(f))\) to be the localization of ring \(A\) at the multiplicative sets of all functions that do not vanish outside of \(V(f)\); i.e. those \(g\) for which \(V(g) \subset V(f)\) or equivalently \(I(f) \subset I(g)\). This depends only on \(D(f)\) and not on \(f\) itself.

If \(D(f') \subset D(f)\), define the restriction map:

\[\text{res}_{D(f), D(f')} : \mathscr{O}_{\text{Spec } A}(D(f)) \rightarrow \mathscr{O}_{\text{Spec } A}(D(f'))\]

in the obvious way; the latter ring is a further restriction of the former ring. The restriction maps obviously commute, and this is a presheaf on a distinguished base.

The data just described give a sheaf on a distinguished open set, and hence determine a sheaf on the topological space on \(\text{Spec } A\). The topological space along with the structure sheaf will be called an `affine scheme`. The notation \(\text{Spec } A\) will henceforth denote the data of the topological space along with the structure sheaf. \(\mathscr{O}_{\text{Spec } A}\) contains data not just of the sheaf, but also the underlying distinguished base that provides a good way of working with \(\mathscr{O}_{\text{Spec } A}\). To prove this, we need to show that base gluability and base identity axioms hold on \(\text{Spec } A\). Suppose \(\text{Spec } A = \bigcup_{i \in I} D({f_i})\), or equivalently, the ideal generated by \(f_i\) is the entire ring \(A\). By quasicompactness of \(A\), \(\text{Spec } A = \bigcup_{i = 1}^{i = n} D({f_i})\) for finite \(n\); i.e. \((f_1, \ldots, f_n) = A\). Suppose we are given \(s \in A\) such that \(\text{res}_{\text{Spec } A, D(f_i)} s = 0\) for all \(A_{f_i}\) for all \(i\); then we wish to show that \(s = 0\). This implies that there is some \(m\) such that for all \(i \in {1, \ldots, n}\) such that \(f_i^m s = 0\). Now, \((f_1^m, \ldots, f_n^m) = A\), so there are \(r_i \in A\) with \(\sum_{i = 1}^n r_i f_i^m = 1\) from which
\[s = \sum_{i = 1}^n r_i (f_i^m s) = 0\]

Hence, we have shown base identity axiom. For the base gluability axiom, we have \(a_i/f_i^{l_i} \in A_f\) agreeing on overlaps \(A_{f_i, f_j}\). Letting \(g_i = f_i^{l_i}\), using \(D(g_i) = D(f_i)\), our elements are of the form \(a_i/g_i \in A_{g_i}\). The fact that \(a_i/g_i\) and \(a_j/g_j\) agree on overlap means that for some \(m_{ij}\),
\[(g_i g_j)^{m_{ij}} (g_j a_i - g_i a_j) = 0\]

Taking \(m = \text{max } m_{ij}\), we get:
\[(g_i g_j)^m (g_j a_i - g_i a_j) = 0\]

for all \(i, j\). Let \(b_i = a_i g_i^m\) for all \(i\), and \(h_i = g_i^{m + 1}\), so \(D(h_i) = D(g_i)\). On each \(D(h_i)\), we have a function \(b_i/h_i\), and the overlap condition is:
\[h_j b_i = h_i b_j\]

Now \(\bigcup D(h_i) = \text{Spec } A\) implying that \(1 = \sum r_i h_i\), for some \(r_i \in A\). Define \(r = \sum r_i b_i\). This will be an element of \(A\) that restricts to each \(b_i/h_j\). Indeed, from the overlap condition,
\[r_j h_j = \sum_i r_i h_i b_j = b_j\]

completing the proof.

Suppose \(M\) is an \(A\)-module. The following construction describes sheaf \(\tilde{M}\) on a distinguished base. Define \(\tilde{M}(D(f))\) to be the localization of \(M\) at a multiplicative set of all functions that do not vanish on \(V(f)\). Define restriction maps \(\text{res}_{D(f), D(g)}\) in an analogous way to \(\mathscr{O}_{\text{Spec } A}\). This defines a sheaf on a distinguished base, and hence on \(\text{Spec } A\). Hence, this is an \(\mathscr{O}_{\text{Spec } A}\)-module.

Note that \(\mathscr{O}_{\text{Spec } A}(U)\) is not a localization of \(A\) at the multiplicative set of functions that do not vanish at any point on \(U\). For instance, let \(\text{Spec } A\) be two copies of \(\mathbb{A}_k^2\) glued together at their origins, and \(U\) be a complement of the origins. Then, the function which is \(1\) on the first copy of \(\mathbb{A}_k^2/\{(0, 0)\}\) is \(0\) on the second copy of \(\mathbb{A}_k^2/\{(0, 0)\}\). Let us collect five counter-examples which we will see in more detail later:

(a) The cone over the quadratic surface, \(\text{Spec } A\) and \(\text{Proj } A\), where \(A = k[w, x, y, z]/(wz - xy)\).
(b) Two planes meeting at a point.
(c) Affine plane minus the origin, \(\mathbb{A}^n - 0\); its inclusion with \(\mathbb{A}^n\); and \(\mathbb{A}^n\) with its doubled origin; each with \(n = 1, 2, \infty\).
(d) Infinite disjoint union of schemes, especially, \(\bigsqcup \text{Spec } k[x]/(x^n)\).
(e) \(\text{Spec } \bar{\mathbb{Q}} \rightarrow \text{Spec } \mathbb{Q}\).

# Visualizing schems: nilpotents

In the affine scheme \((\text{Spec } A, \mathscr{O}_{\text{Spec } A})\), the information about nilpotents is invisible at the level of points. We have the following inclusion-reversing bijections:

(a) Maximal ideals of \(A\) \(\leftrightarrow\) closed points of \(\text{Spec } A\)
(b) Prime ideals of \(A\) \(\leftrightarrow\) irreducible closed subsets of \(\text{Spec } A\)
(c) Nilradicals of \(A\) \(\leftrightarrow\) closed subsets of \(\text{Spec } A\)

Our goal now is to figure out how to picture ideals that are not radical. We immediately picture \(\text{Spec } \mathbb{C}[x]/x(x - 1)(x - 2)\) as closed subsets of \(\mathbb{A}_\mathbb{C}^2\), \(\{0, 1, 2\}\). In particular, the map \(\mathbb{A}_\mathbb{C}^2 \rightarrow \mathbb{A}_\mathbb{C}^2/x(x - 1)(x - 2)\) can be shown to be a restriction of \(\mathbb{A}_\mathbb{C}^2\) to \(\{0, 1, 2\}\). Similarly, \(\mathbb{C}[x]/(x^2)\) can be thought of as a point at the origin with some "fuzz" remembering information about the first derivative.

\[\mathbb{C}[x] \twoheadrightarrow \mathbb{C}[x]/(x^2) \twoheadrightarrow \mathbb{C}[x]/(x)\]

\(\mathbb{C}[x, y]/(x, y)^3\) can be pictured as a "circular fuzz" around origin remembering first and second derivatives, while \(\mathbb{C}[x, y]/(x^2, y^2)\) can be thought of as a square fuzz around origin that is circumscribed by \(\mathbb{C}[x, y]/(x, y)^3\), and inscribed by \(\mathbb{C}[x, y]/(x, y)^2\). In fact, given two ideals \(I, J\) of \(A\), \(\text{Spec } A/IJ\) should be pictured as the intersection of pictures \(\text{Spec } A/I\) and \(\text{Spec } A/J\) in \(\text{Spec } A\). As another example, consider a polynomial in \(\mathbb{C}[x, y]/(y^2, xy)\); knowing what it is is equivalent to knowing its values on the \(x\)-axis, as well as its first-derivative information around the origin.

Next, consider the intersection of the parabola \(y = x^2\) and the \(x\)-axis:

\[\begin{align*}
\text{Spec } \mathbb{C}[x, y]/(y - x^2) \cap \text{Spec } \mathbb{C}[x, y]/(y) &= \text{Spec } \mathbb{C}[x, y]/(y - x^2, y) \\
&= \text{Spec } \mathbb{C}[x, y]/(x^2, y)
\end{align*}\]

We interpret this intersection as having multiplicity \(2\) on the \(x\)-axis.

# Definition of schemes

First, define isomorphism of ringed spaces \((X, \mathscr{O}_X), (Y, \mathscr{O}_Y)\) as:

(a) A homeomorphism from \(X\) to \(Y\).
(b) An isomorphism of sheaves \(\mathscr{O}_X, \mathscr{O}_Y\), considered to be on the same space via \(\pi\). In other words, it is the isomorphism \(\mathscr{O}_Y \rightarrow \pi_* \mathscr{O}_X\), or equivalently using adjoints, \(\pi^{-1} \mathscr{O}_Y \rightarrow \mathscr{O}_X\) of sheaves on \(X\).

We have a correspondence between sets, topologies, and structure sheaves. An `affine scheme` is a ringed space isomorphic to \((\text{Spec } A, \mathscr{O}_{\text{Spec } A})\) for some \(A\). A `scheme` \((X, \mathscr{O}_X)\) is a ringed space such that every point \(X\) has open neighborhood \(U\) such that \((X, \mathscr{O}_X|_U)\) is an affine scheme. The topology on a scheme is the Zariski topology. The isomorphism between two schemes is an isomorphism as ringed spaces. If \(U \subset X\) is an open set, \(\Gamma(U, \mathscr{O}_X)\) is said to be a function on \(U\); this generalizes in the obvious way to functions on an affine scheme.

From the definition of a structure sheaf on an affine scheme, if \((X, \mathscr{O}_X)\) is an affine scheme, we can recover its ring \(A\) where \(X = \text{Spec } A\) by taking global sections as \(X = D(1)\):
\[\Gamma(X, \mathscr{O}_X) = \Gamma(D(1), \mathscr{O}_X) = A\]

We can recognize \(X\) as the scheme on \(\text{Spec } A\): we get the isomorphism \(\pi : (\text{Spec } \Gamma(X, \mathscr{O}_X), \mathscr{O}_{\text{Spec } \Gamma(X, \mathscr{O}_X)}) \rightarrow (X, \mathscr{O}_X)\). For example, if \(\mathfrak{m}\) is a maximal ideal of \(\Gamma(X, \mathscr{O}_X)\), \(\{\pi(\mathfrak{m})\} = V(\mathfrak{m})\).

Given \(f \in A\), \(\Gamma(D(f), \mathscr{O}_{\text{Spec } A}) = A_f\). Under natural inclusion \(A_f \hookrightarrow A\), the Zariski topology on \(\text{Spec } A\) restricts to that in \(\text{Spec } A_f\). Moreover, the structure sheaf on \(\text{Spec } A\) restricts to the structure sheaf on \(\text{Spec } A_f\).

We say that \((U, \mathscr{O}_X|_U)\) is an `open subscheme` of \(X\). If \(U\) is also an affine scheme, \(U\) is called `affine open subscheme`, or simply `affine open`. For example, \(D(f)\) is an affine open subscheme.

Open subsets of schemes come with a natural scheme structure. For comparison, closed subschemes on \(X\) are, informally, a particular kind of scheme structure on closed subsets of \(X\). For example, if \(I \subset A\) is an ideal, then \(\text{Spec } A/I\) endows \(V(I) \subset \text{Spec } A\) with a scheme structure, but note that there can be different ideals with the same vanishing set; for example, \((x), (x^2)\) in \(k[x]\).