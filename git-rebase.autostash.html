<!DOCTYPE html>
<html>
  <head>
    <title>artagnon.com: git-rebase.autostash</title>
    <meta charset="UTF-8" />
    <meta name="description" content="Ramkumar Ramachandra's site" />
    <meta name="author" content="Ramkumar Ramachandra" />
    <meta name="keywords" content="programming, linux, philosophy, git" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/design/screen.css" media="screen" />
    <link rel="stylesheet" href="/design/claytext.css" media="screen" />
    <link rel="stylesheet" href="/design/mobile.css" media="only screen and (min-device-width: 320px) and (max-device-width: 600px)" />
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans" />
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Droid+Sans+Mono" />
    <link rel="shortcut icon" href="/design/favicon.ico" />
    <script type="text/javascript" src="/design/analyticstracking.js"></script>
  </head>
  <body>
    <div id="wrapper">
      <div id="main">
        <h1>git: rebase.autostash</h1>
        <p>This new feature allows a rebase to be executed on a dirty worktree or
          index.  It works by creating a temporary &quot;dangling merge commit&quot; out
          of the worktree and index changes (via &#39;git stash create&#39;), and
          automatically applying it after a successful rebase or abort.</p>
        <p>rebase stores the SHA-1 hex of the temporary merge commit, along with
          the rest of the rebase state, in either
          .git/{rebase-merge,rebase-apply}/autostash depending on the kind of
          rebase.  Since $state_dir is automatically removed at the end of a
          successful rebase or abort, so is the autostash.</p>
        <p>The advantage of this approach is that we do not affect the normal
          stash&#39;s reflogs, making the autostash invisible to the end-user.  This
          means that you can use &#39;git stash&#39; during a rebase as usual.</p>
        <p>When the autostash application results in a conflict, we push
          $state_dir/autostash onto the normal stash and remove $state_dir
          ending the rebase.  The user can inspect the stash, and pop or drop at
          any time.</p>
        <p>Most significantly, this feature means that a caller like pull (with
          pull.rebase set to true) can easily be patched to remove the
          require_clean_work_tree restriction.
          </p>
      </div>
      <div id="sidebar">
        <ul>
          <li>
            <a href="/index">index</a>
          </li>
          <li>
            <a href="/log">log</a>
          </li>
          <li>
            <a href="/colophon">colophon</a>
          </li>
        </ul>
      </div>
    </div>
  </body>
</html>