<!DOCTYPE html><html lang="en">
  <head>
    <title>My 2025 in LLVM: samesign, HashRecognize, and VPlan</title>
    <meta charset="utf-8">
    <meta name="author" content="Ramkumar Ramachandra">
    <meta name="description" content="A personal website containing information about the author, creative writing, technical satire, technical articles on compilers and logic">
    <meta name="keywords" content="Compilers, Compiler Optimization, C++, LLVM, Proof Assistants, Rocq, Formalized Mathematics, Mathematical Logic, Creative Writing, Technical Satire">
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index,follow">
    <link rel="icon" type="image/x-icon" href="/dist/favicon.ico">
    <link rel="apple-touch-icon" sizes="58x58" href="/dist/touch-icon-iphone.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/dist/touch-icon-ipad.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/dist/touch-icon-ipad-retina.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/dist/touch-icon-iphone-retina.png">
    <link rel="alternate" type="application/rss+xml" href="/feed.xml" title="RSS Feed">
    <link rel="preload" as="font" crossorigin="" href="https://cdn.jsdelivr.net/fontsource/fonts/nunito-sans:vf@latest/latin-wght-normal.woff2">
    <link rel="preload" as="font" crossorigin="" href="https://cdn.jsdelivr.net/fontsource/fonts/roboto-mono:vf@latest/latin-wght-normal.woff2">
    <script async="" src="https://cdn.jsdelivr.net/npm/cash-dom@8/dist/cash.min.js"></script>
    <script async="" src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script async="" src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/relativeTime.js"></script>
    <script async="" src="/dist/script.min.js"></script>
    <script async="" data-domain="artagnon.com" src="https://analytics.artagnon.com/js/script.js"></script>
    <link rel="stylesheet" type="text/css" href="/dist/style.min.css">
  <style id="MJX-CHTML-styles">
mjx-container[jax="CHTML"] {
  line-height: 0;
}

mjx-container [space="1"] {
  margin-left: .111em;
}

mjx-container [space="2"] {
  margin-left: .167em;
}

mjx-container [space="3"] {
  margin-left: .222em;
}

mjx-container [space="4"] {
  margin-left: .278em;
}

mjx-container [space="5"] {
  margin-left: .333em;
}

mjx-container [rspace="1"] {
  margin-right: .111em;
}

mjx-container [rspace="2"] {
  margin-right: .167em;
}

mjx-container [rspace="3"] {
  margin-right: .222em;
}

mjx-container [rspace="4"] {
  margin-right: .278em;
}

mjx-container [rspace="5"] {
  margin-right: .333em;
}

mjx-container [size="s"] {
  font-size: 70.7%;
}

mjx-container [size="ss"] {
  font-size: 50%;
}

mjx-container [size="Tn"] {
  font-size: 60%;
}

mjx-container [size="sm"] {
  font-size: 85%;
}

mjx-container [size="lg"] {
  font-size: 120%;
}

mjx-container [size="Lg"] {
  font-size: 144%;
}

mjx-container [size="LG"] {
  font-size: 173%;
}

mjx-container [size="hg"] {
  font-size: 207%;
}

mjx-container [size="HG"] {
  font-size: 249%;
}

mjx-container [width="full"] {
  width: 100%;
}

mjx-box {
  display: inline-block;
}

mjx-block {
  display: block;
}

mjx-itable {
  display: inline-table;
}

mjx-row {
  display: table-row;
}

mjx-row > * {
  display: table-cell;
}

mjx-mtext {
  display: inline-block;
}

mjx-mstyle {
  display: inline-block;
}

mjx-merror {
  display: inline-block;
  color: red;
  background-color: yellow;
}

mjx-mphantom {
  visibility: hidden;
}

_::-webkit-full-page-media, _:future, :root mjx-container {
  will-change: opacity;
}

mjx-c::before {
  display: block;
  width: 0;
}

.MJX-TEX {
  font-family: MJXZERO, MJXTEX;
}

.TEX-B {
  font-family: MJXZERO, MJXTEX-B;
}

.TEX-I {
  font-family: MJXZERO, MJXTEX-I;
}

.TEX-MI {
  font-family: MJXZERO, MJXTEX-MI;
}

.TEX-BI {
  font-family: MJXZERO, MJXTEX-BI;
}

.TEX-S1 {
  font-family: MJXZERO, MJXTEX-S1;
}

.TEX-S2 {
  font-family: MJXZERO, MJXTEX-S2;
}

.TEX-S3 {
  font-family: MJXZERO, MJXTEX-S3;
}

.TEX-S4 {
  font-family: MJXZERO, MJXTEX-S4;
}

.TEX-A {
  font-family: MJXZERO, MJXTEX-A;
}

.TEX-C {
  font-family: MJXZERO, MJXTEX-C;
}

.TEX-CB {
  font-family: MJXZERO, MJXTEX-CB;
}

.TEX-FR {
  font-family: MJXZERO, MJXTEX-FR;
}

.TEX-FRB {
  font-family: MJXZERO, MJXTEX-FRB;
}

.TEX-SS {
  font-family: MJXZERO, MJXTEX-SS;
}

.TEX-SSB {
  font-family: MJXZERO, MJXTEX-SSB;
}

.TEX-SSI {
  font-family: MJXZERO, MJXTEX-SSI;
}

.TEX-SC {
  font-family: MJXZERO, MJXTEX-SC;
}

.TEX-T {
  font-family: MJXZERO, MJXTEX-T;
}

.TEX-V {
  font-family: MJXZERO, MJXTEX-V;
}

.TEX-VB {
  font-family: MJXZERO, MJXTEX-VB;
}

mjx-stretchy-v mjx-c, mjx-stretchy-h mjx-c {
  font-family: MJXZERO, MJXTEX-S1, MJXTEX-S4, MJXTEX, MJXTEX-A ! important;
}

@font-face /* 0 */ {
  font-family: MJXZERO;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Zero.woff") format("woff");
}

@font-face /* 1 */ {
  font-family: MJXTEX;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Regular.woff") format("woff");
}

@font-face /* 2 */ {
  font-family: MJXTEX-B;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Bold.woff") format("woff");
}

@font-face /* 3 */ {
  font-family: MJXTEX-I;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-Italic.woff") format("woff");
}

@font-face /* 4 */ {
  font-family: MJXTEX-MI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Main-Italic.woff") format("woff");
}

@font-face /* 5 */ {
  font-family: MJXTEX-BI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Math-BoldItalic.woff") format("woff");
}

@font-face /* 6 */ {
  font-family: MJXTEX-S1;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size1-Regular.woff") format("woff");
}

@font-face /* 7 */ {
  font-family: MJXTEX-S2;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size2-Regular.woff") format("woff");
}

@font-face /* 8 */ {
  font-family: MJXTEX-S3;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size3-Regular.woff") format("woff");
}

@font-face /* 9 */ {
  font-family: MJXTEX-S4;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Size4-Regular.woff") format("woff");
}

@font-face /* 10 */ {
  font-family: MJXTEX-A;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_AMS-Regular.woff") format("woff");
}

@font-face /* 11 */ {
  font-family: MJXTEX-C;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Regular.woff") format("woff");
}

@font-face /* 12 */ {
  font-family: MJXTEX-CB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Calligraphic-Bold.woff") format("woff");
}

@font-face /* 13 */ {
  font-family: MJXTEX-FR;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Regular.woff") format("woff");
}

@font-face /* 14 */ {
  font-family: MJXTEX-FRB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Fraktur-Bold.woff") format("woff");
}

@font-face /* 15 */ {
  font-family: MJXTEX-SS;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Regular.woff") format("woff");
}

@font-face /* 16 */ {
  font-family: MJXTEX-SSB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Bold.woff") format("woff");
}

@font-face /* 17 */ {
  font-family: MJXTEX-SSI;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_SansSerif-Italic.woff") format("woff");
}

@font-face /* 18 */ {
  font-family: MJXTEX-SC;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Script-Regular.woff") format("woff");
}

@font-face /* 19 */ {
  font-family: MJXTEX-T;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Typewriter-Regular.woff") format("woff");
}

@font-face /* 20 */ {
  font-family: MJXTEX-V;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Regular.woff") format("woff");
}

@font-face /* 21 */ {
  font-family: MJXTEX-VB;
  src: url("https://cdn.jsdelivr.net/npm/mathjax@3/es5/output/chtml/fonts/woff-v2/MathJax_Vector-Bold.woff") format("woff");
}
</style></head>
  <body class="wrapper">
    <nav><a href="/"><img id="logo" src="/dist/artagnon.com.svg" alt="home" width="317" height="390"></a><img id="more" src="/dist/icon.more.svg" alt="menu" width="16" height="74">
      <ul>
        <li>
          <span class="navidx">01</span><a href="/art">Art</a>
        </li>
        <li>
          <span class="navidx">02</span><a href="/compilers">Compilers</a>
        </li>
        <li>
          <span class="navidx">03</span><a href="/logic">Logic</a>
        </li>
      </ul>
    </nav>
    <main>
      <header>
        <h1>
          My 2025 in LLVM: samesign, HashRecognize, and VPlan
        </h1>
        <div id="metadata">
          <span id="timestamp"><time datetime="2025-12-08">Mon, 8 Dec 2025 18:00:00 +0000</time></span>
        </div>
      </header>
      <article>
        <p>
          As the year draws to a close, it helps to look back and reflect on some key changes in LLVM. The article is written from my perspective, summarizing work I landed, along with adjacent work, in chronological order.
        </p>
        <p>
          In September 2024, Nikita Popov proposed <a href="https://discourse.llvm.org/t/rfc-signedness-independent-icmps/81423">signedness-independent integer-compares</a>, and the necessary work for enabling optimizations with it occupied the first two months of my 2025. In January, Florian Hahn introduced the initial version of a <a href="https://github.com/llvm/llvm-project/blob/main/llvm/include/llvm/Analysis/ScalarEvolutionPatternMatch.h">pattern-matcher for ScalarEvolution</a>, which I would flesh out and use to improve code over the course of the year.
        </p>
        <p>
          March and April were not very productive, as I was on vacation and attending EuroLLVM. In the little time I had, I fixed a <a href="https://github.com/llvm/llvm-project/pull/137005">vectorization bug</a> and improved code by <a href="https://github.com/llvm/llvm-project/pull/134373">introducing a new iterator in a fundamental data structure</a>.
        </p>
        <p>
          In May, I introduced a <a href="https://github.com/llvm/llvm-project/pull/125365">constant folder</a> in VPlan, guided by Florian, and fixed another <a href="https://github.com/llvm/llvm-project/pull/136858">vectorization bug</a>. In collaboration with Mel Chen, I made a <a href="https://github.com/llvm/llvm-project/pull/118393">small improvement to the routine that checks patterns for vectorization</a>.
        </p>
        <p>
          In June, an <a href="https://github.com/llvm/llvm-project/blob/main/llvm/lib/Analysis/HashRecognize.cpp">analysis to recognize cyclic-redundancy-check loops</a> landed, but required several months of improvements, before finally <a href="https://github.com/llvm/llvm-project/pull/143208">enabling optimization of CRC loops</a> in September: the work was done in close collaboration with Piotr Fusik. While reviewing one of Florian's patches, I also <a href="https://github.com/llvm/llvm-project/pull/141752">extended a pattern for vectorization</a>, which Florian built upon.
        </p>
        <p>
          In July, I was occupied with instruction selection and <a href="https://github.com/llvm/llvm-project/pull/146058">cost-modeling work</a> for the intrinsics <a href="https://github.com/llvm/llvm-project/pull/145898">lrint</a>, <a href="https://github.com/llvm/llvm-project/pull/147713">lround</a>, and <a href="https://github.com/llvm/llvm-project/pull/152476">ldexp</a> on RISC-V, guided by Craig Topper.
        </p>
        <p>
          In August, Luke Lau used parameter packs to <a href="https://github.com/llvm/llvm-project/pull/152272">greatly improve the pattern-matcher</a> in VPlan. Inspired by another of his patches, I would introduce a <a href="https://github.com/llvm/llvm-project/pull/154771">integer/floating-point compare matcher</a>, using it for optimization benefit. I would also fix some issued related to wrap-flags in VPlan.
        </p>
        <p>In September, I introduced a <a href="https://github.com/llvm/llvm-project/pull/151872">common-subexpression-elimination transform</a> in VPlan, guided by Florian. I also picked up and completed one of Luke's abandoned patches, a <a href="https://github.com/llvm/llvm-project/pull/159386">match functor</a>. Nikita would introduce <a href="https://github.com/llvm/llvm-project/blob/main/llvm/lib/Transforms/Scalar/DropUnnecessaryAssumes.cpp">a new transform</a> to strip unnecessary <code>llvm.assume</code> instructions.
        </p>
        <p>
          In October, I would obsess over the loop-invariant code motion in VPlan, and <a href="https://github.com/llvm/llvm-project/pull/162674">factor out the legality check for hoisting/sinking</a>, fixing a miscompile. My routine would bail out on memory operations due to aliasing issues, and I was thinking about how to get aliasing information in VPlan.
        </p>
        <p>In November, I would <a href="https://github.com/llvm/llvm-project/pull/168354">fix long-standing issues related to wrap-flags</a> in VPlan, and make an improvement to a routine to undo sub-optimal widening decisions in VPlan. Florian would build upon my improvement to yield the <a href="https://github.com/llvm/llvm-project/pull/168246">final version</a>. He would also create specialized hoisting/sinking routines for memory operations, based on the <code>noalias</code> metadata: I plan to re-use the legality checks to improve the general case.
        </p>
        <p>
          Finally, we're in December. The main outstanding patches are <a href="https://github.com/llvm/llvm-project/pull/168886">directly unrolling a recipe</a> in VPlan, and introducing a <a href="https://github.com/llvm/llvm-project/pull/168731">carry-less multiply intrinsic</a>, whose design was guided by Craig and Piotr. Both will hopefully land soon.
        </p>
        <footer>
          <ul class="footer">
            <li>
              Although I wasn't either directly or indirectly involved, <a href="https://github.com/llvm/llvm-project/pull/153821">llvm-lit --update-tests</a> introduced in August, has completely eliminated the tedium associated with mass test-updates!
            </li>
          </ul>
        </footer>
      </article>
    </main>
  </body>
</html>